<!DOCTYPE html>
<html>
  <head>
    <title>Xor Boole</title>
    <link rel="shortcut icon" href="http://xor.boole.io/headbw.png"></link>
    <link type="text/css" rel="stylesheet" href="style.css">
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <link rel="stylesheet" href="http://cdn.jsdelivr.net/highlight.js/8.6/styles/github.min.css">
    <script src="highlight.pack.js"></script>
  </head>
  <body>
    <div class="intro">
      <h1 class="title">xor.boole.io</h1>
      <p class="intro">
        Hi! My name is Miguel Young. I'm currently an undergrad at the <a href="http://mit.edu">Massachusetts Institute of Technology</a>, 
        studying theoretical mathematics, class of 2018. I'm also interested in computer programming and 
        server administration, and enjoy experimenting with language design/extension, particularly in
        Scala. I also contribute to open source projects related to the game Minecraft.
      </p>
    </div>
    <hr>
    <div id="buttons"></div>
    <script type="text/javascript">
      var langs = {
        scala:       'scala',
        c:           'c',
        java:        'java',
        python:      'py',
        go:          'go',
        kotlin:      'kt'
        //'brainf--k': 'bf'
      };

      var codes = {};

      $(function() {
        for(key in langs) {
          var request = {
            lang: key,
            url: 'http://xor.boole.io/snippets/xor.' + langs[key],
            type: 'get',
            async: 'false',
            success: function(s) {
              console.log(this.lang)
              var src = s;
              src = src
                .replace(/(\n[ ]*)(.+["'](.+?@.+?\..+?)["'].+)([ ]*\n)/g, '$1<a href="mailto:$3">$2</a>$4')
                .replace(/(\n[ ]*)(.+["']((?!irc)[a-zA-Z0-9\-]+?\..+?)["'].+)([ ]*\n)/g,  '$1<a href="http://$3">$2</a>$4')
                .replace(/(\n[ ]*)(.+["'](drXor\/?.*?)["'].+)([ ]*\n)/g,   '$1<a href="http://github.com/$3">$2</a>$4')
              src = src.split('\n').map(function(s){return s ? '    ' + s : s}).join('\n');
              src = '\n\n' + src + '\n\n\n';
              codes[key] = src;
              var button = $('<codebutton>', {type: 'button', id: this.lang + 'button', text: this.lang[0].toUpperCase() + this.lang.slice(1)});
              var code = $('<code>', {'class': this.lang }).append(src)
              var precode = $('<pre>', { id: this.lang + 'code' }).append(code)

              if(this.lang !== 'scala') precode[0].style.display = 'none'
              button.click(handleCode)
              code.each(function(i, block) { hljs.highlightBlock(block); })
              $('#buttons').append(button).append('\n').after(precode).append('\n');
            }

          };
          $.ajax(request);
        }
      });

      function handleCode(e) {
        var button = e.target.tagName.toLowerCase() === 'codebutton' ? e.target : e.target.parentElement;
        var lang = button.id.toLowerCase().match(/.+?(?=button)/)[0];
        Object.keys(langs).filter( function(l) { return l !== lang } ).forEach( function(otherlang) {
          $('#' + otherlang + 'code')[0].style.display = 'none';
        })
        $('#' + lang + 'code')[0].style.display = 'block';
      }
    </script>
    <hr>
    <center><img src="headbw.png" align="middle"/></center>
  </body>
</html>
